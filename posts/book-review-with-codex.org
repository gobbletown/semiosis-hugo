#+LATEX_HEADER: \usepackage[margin=0.5in]{geometry}
#+OPTIONS: toc:nil

#+HUGO_BASE_DIR: /home/shane/var/smulliga/source/git/semiosis/semiosis-hugo
#+HUGO_SECTION: ./posts

#+TITLE: Book review with Codex
#+DATE: <2021-10-12>
#+AUTHOR: Shane Mulligan
#+KEYWORDS: emacs openai codex

** Summary
I make a prompt which generates summaries of
books, based on what the LM has read.

** Prompt
=pf-synopsis-of-book/2=
#+BEGIN_SRC yaml -n :async :results verbatim code
  task: "Synopsis of book"
  doc: "Given a book title, give a synopsis"
  prompt-version: 1
  prompt: |+
    http://readersdigest.co.uk/book-reviews/<sl:author>/<sl:title>/
  
    <delim>
    Book title: <q:title>
    <delim>
    Author: <q:author>
    <delim>
    Full synopsis: <:pp>"
  engine: "OpenAI Codex"
  temperature: 0.3
  max-generated-tokens: "(* 2 prompt-length)"
  top-p: 1.0
  stop-sequences:
  - "<delim>"
  cache: on
  vars:
  - "author"
  - "title"
  examples:
  - "J. R. R. Tolkien"
  - "The Hobbit"
  info: on
  completion: off
  insertion: off
  n-collate: 1
  postprocessor: pen-str remove-leading-and-trailing-newlines | uq | sed -z 's/^"//' | pen-pretty-paragraph
#+END_SRC

** Demo
*** Through the Looking Glass : and What Alice Found There - Lewis Carroll
#+BEGIN_SRC text -n :async :results verbatim code
  Alice follows a procession of playing cards, a
  duck, a kangaroo, a walrus and a baby bitzhu.
  
  In a crazy, upside down world, Alice meets a
  baby, a white kitten, a hookah-smoking
  caterpillar, a Cheshire cat, a baby of
  literature, and a pig and a sheep on their way
  to be slaughtered for food for the baby,
  bitzhu.
  
  She is tricked into falling down a rabbit hole
  into an underground kingdom.
  
  She finds herself in a long corridor.
  
  She meets the Red Queen, who tells her she is
  now in a game and to get to the opposite end
  of the corridor within two moves.
  
  She also finds that the playing cards, the
  White King, the Red King, the Knave of Hearts,
  and the Knave of Diamonds are alive and
  talking to her.
  
  Alice realizes the game is a trick played by
  the Red Queen and, using the fan to fan
  herself, calls back the Red Queen's
  flamingoes, who
#+END_SRC

*** The Hunting of the Snark
#+BEGIN_SRC text -n :async :results verbatim code
  "The Hunting of the Snark" is a short
  children's novel by the British author Lewis
  Carroll.
  
  A popular children's story, it is about a
  journey taken by the protagonist, an English
  navigation captain, in search of a probable
  adventure.
  
  During this journey, he is accompanied by
  aortal creatures known as the "Brummles", who
  are able to share the same physical space in
  an apparently telepathic manner.
  
  It is also a parody of "Journey's End" by
  Emily Dickinson, which is itself a parody of
  "The Hunting of the Snark".
#+END_SRC

*** The Hobbit - J. R. R. Tolkien
#+BEGIN_SRC text -n :async :results verbatim code
  Bilbo Baggins is a hobbit who enjoys a
  comfortable, unambitious life, rarely
  traveling any farther than his pantry or
  cellar.
  
  But his contentment is disturbed when the
  wizard Gandalf and a company of dwarves arrive
  on his doorstep one day to whisk him away on
  an adventure.
  
  They have launched a plot to raid the treasure
  hoard guarded by Smaug the Magnificent, a
  large and very dangerous dragon.
  
  Bilbo reluctantly joins their quest, unaware
  that on his journey to the Lonely Mountain he
  will encounter both a magic ring and a
  frightening creature known as Gollum.
#+END_SRC

*** COMMENT The Library of Babel - Jorge Luis Borges

#+BEGIN_SRC text -n :async :results verbatim code
  Library of Babel is a short story collection
  by the Argentine-American writer Jorge Luis
  Borges.
  
  It was first published in English in 1955.
  
  It is one of his most famous works.
  
  The story deals with the fictional "Library of
  Babel" described as aLibrary of Babel is a
  short story collection by the Argentine-
  American writer Jorge Luis Borges.
  
  It was first published in English in 1955.
  
  It is one of his most famous works.
  
  The story deals with the fictional "Library of
  Babel" described as a library with an infinite
  number of hexagonal rooms.
  
  Each room is equipped with books (also
  hexagonal) that contain every possible
  combination of letters, organized
  alphabetically.
#+END_SRC

** Demo
#+BEGIN_EXPORT html
<!-- Play on asciinema.com -->
<!-- <a title="asciinema recording" href="https://asciinema.org/a/xe1JYXcKFyFfKvxG0bteYt5tR" target="_blank"><img alt="asciinema recording" src="https://asciinema.org/a/xe1JYXcKFyFfKvxG0bteYt5tR.svg" /></a> -->
<!-- Play on the blog -->
<script src="https://asciinema.org/a/xe1JYXcKFyFfKvxG0bteYt5tR.js" id="asciicast-xe1JYXcKFyFfKvxG0bteYt5tR" async></script>
#+END_EXPORT